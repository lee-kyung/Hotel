<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybats-3-mapper.dtd">
 
<mapper namespace="kr.co.hotel.mypage.MyPageMapper">
	
	<select id="myprofile_pwd_ok" resultType="Integer">
		select count(*) as cnt from member where userid=#{param1} and pwd=#{param2}
	</select>

	<select id="myprofile" resultType="kr.co.hotel.member.MemberVO">
		select * from member where userid=#{param1}
	</select>
	
	<update id="myprofile_edit_ok">
		update member set phone=#{phone}, birth=#{birth}, email=#{email}, zip=#{zip}, juso=#{juso}, juso_etc=#{juso_etc} where userid=#{userid}
	</update>
	
<!-- 	<select id="getPwd" resultType="String">
  		select pwd from member where userid=#{param1}
  	</select> -->
  	
	<update id="mypwd_change_ok">
		update member set pwd=#{param1} where userid=#{param2}
	</update>
	
	<select id="getRoomcount" resultType="Integer">
  		select count(*) as cnt from roombk where checkin like concat('%',#{param},'%')
  	</select>
  	
  	<select id="getDinecount" resultType="Integer">
  		select count(*) as cnt from diningresv where dr_date like concat('%',#{param},'%')
  	</select>
  	
  	<select id="getEshopcount" resultType="Integer">
  		select count(*) as cnt from gumae where buyday like concat('%',#{param},'%')
  	</select>
  	
  	<select id="wedding_resv" resultType="kr.co.hotel.wedding.WeddingResvVO">
  		select * from weddingresv where userid=#{param1} order by wresv_id desc
  	</select>
  	
  	<select id="wedding_resv_search" resultType="kr.co.hotel.wedding.WeddingResvVO">
  		<![CDATA[select * from weddingresv where userid=#{param1} and #{param2}<= wresv_day and wresv_day <=#{param3} order by wresv_id desc]]>
  	</select>
  	
  	<update id="weddingR_state_change">
  		update weddingresv set state=#{param2} where wresv_id=#{param1}
  	</update>
  	
  	<update id="state_complete_change">
  		 <![CDATA[update weddingresv set state=2 where wresv_cday <= #{param1} and state=0]]>
  	</update>
  	
  	
</mapper>